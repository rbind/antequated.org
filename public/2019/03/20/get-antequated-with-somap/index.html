<!DOCTYPE HTML>

<html>
    <head>
        
            
                <title>Get antequated with SOmap</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.20.6" />
        


        
        
            
                <meta name="description" content="A website built through Hugo and blogdown.">
            
        

        

  <meta name="twitter:card" content="summary"/>



<meta name="twitter:text:title" content="Get antequated with SOmap"/>
<meta name="twitter:title" content="Get antequated with SOmap"/>
<meta name="twitter:description" content="Polar maps! Last time we got this far by creating a very simplistic polar map and discussing some of the difficulties in customizing and finishing it. Since then Dale Maschette discussed these problems at useR Brisbane 2018 and stirred up multiple discussions on twitter about the joys of polar maps.
Behold SOmap.
SOmap::SOmap() ## Loading required namespace: rgeos  SOmap To install the SOmap package use
remotes::install_github(&quot;AustralianAntarcticDivision/SOmap&quot;) and see the package readme and documentation for further details."/>


        <meta property="og:title" content="Get antequated with SOmap" />
<meta property="og:description" content="Polar maps! Last time we got this far by creating a very simplistic polar map and discussing some of the difficulties in customizing and finishing it. Since then Dale Maschette discussed these problems at useR Brisbane 2018 and stirred up multiple discussions on twitter about the joys of polar maps.
Behold SOmap.
SOmap::SOmap() ## Loading required namespace: rgeos  SOmap To install the SOmap package use
remotes::install_github(&quot;AustralianAntarcticDivision/SOmap&quot;) and see the package readme and documentation for further details." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2019/03/20/get-antequated-with-somap/" />



<meta property="article:published_time" content="2019-03-20T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-03-20T00:00:00&#43;00:00"/>











        
<meta itemprop="name" content="Get antequated with SOmap">
<meta itemprop="description" content="Polar maps! Last time we got this far by creating a very simplistic polar map and discussing some of the difficulties in customizing and finishing it. Since then Dale Maschette discussed these problems at useR Brisbane 2018 and stirred up multiple discussions on twitter about the joys of polar maps.
Behold SOmap.
SOmap::SOmap() ## Loading required namespace: rgeos  SOmap To install the SOmap package use
remotes::install_github(&quot;AustralianAntarcticDivision/SOmap&quot;) and see the package readme and documentation for further details.">


<meta itemprop="dateModified" content="2019-03-20T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="757">



<meta itemprop="keywords" content="" />

        

        

        
        
            
        

        
        
            <link rel="stylesheet" href="../../../../css/google-font.css" />
            <link rel="stylesheet" href="../../../../css/font-awesome.min.css" />
            <link rel="stylesheet" href="../../../../css/main.css" />
            <link rel="stylesheet" href="../../../../css/add-on.css" />
            <link rel="stylesheet" href="../../../../css/monokai-sublime.css">
        

        

        
        
        
            
        
    </head>
    <body>

        
        <div id="wrapper">

    
    
<header id="header">
    
        <h2><a href="../../../../"></i></a></h2>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="../../../../about/">
                        About
                    </a>
                </li>
            
                <li>
                    <a href="https://github.com/AustralianAntarcticDivision/SOmap">
                        GitHub
                    </a>
                </li>
            
                <li>
                    <a href="https://twitter.com/AusAntarctic">
                        Twitter
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="q" value="site:/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="q" value="site:/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="../../../../about/">
                            <h3>
                                
                                About
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/AustralianAntarcticDivision/SOmap">
                            <h3>
                                
                                GitHub
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://twitter.com/AusAntarctic">
                            <h3>
                                
                                Twitter
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section>
            <ul class="links">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    <li>
                        <a href="../../../../2019/03/20/get-antequated-with-somap/"><p>Get antequated with SOmap</p></a>
                    </li>
                
                    <li>
                        <a href="../../../../2017/06/14/polar-maps-now/"><p>polar maps now!</p></a>
                    </li>
                
                    <li>
                        <a href="../../../../2017/06/13/hello-antequated/"><p>hello-antequated</p></a>
                    </li>
                
                    <li>
                        <a href="../../../../2017/03/08/general-southern-ocean-map/"><p>Making a general Southern Ocean map</p></a>
                    </li>
                
                    <li>
                        <a href="../../../../post/"><p>Posts</p></a>
                    </li>
                
            </ul>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            


<li><a href="//twitter.com/share?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f&text=Get%20antequated%20with%20SOmap&via=" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//plus.google.com/share?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f&title=Get%20antequated%20with%20SOmap" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f&title=Get%20antequated%20with%20SOmap" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f&title=Get%20antequated%20with%20SOmap" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by &body=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
    <header>
    <div class="title">
        
            <h1><a href="../../../../2019/03/20/get-antequated-with-somap/">Get antequated with SOmap</a></h1>
            
        
        
    </div>
    <div class="meta">
        
            
        

        <time class="published"
            datetime='2019-03-20'>
            March 20, 2019</time>
        <span class="author"></span>
        
        
    </div>
</header>


    <section id="social-share">
        <ul class="icons">
            


<li><a href="//twitter.com/share?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f&text=Get%20antequated%20with%20SOmap&via=" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//plus.google.com/share?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f&title=Get%20antequated%20with%20SOmap" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f&title=Get%20antequated%20with%20SOmap" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f&title=Get%20antequated%20with%20SOmap" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by &body=%2f2019%2f03%2f20%2fget-antequated-with-somap%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
    

    <div id="content">
        <div id="polar-maps" class="section level2">
<h2>Polar maps!</h2>
<p>Last time we <a href="http://antequated.org/2017/06/14/polar-maps-now/">got this far</a> by creating a very simplistic polar map and discussing some of the difficulties in customizing and finishing it. Since then <a href="https://github.com/Maschette">Dale Maschette</a> discussed <a href="https://twitter.com/StephdeSilva/status/1017631191854297088">these problems</a> at <a href="https://user2018.r-project.org">useR Brisbane 2018</a> and <a href="https://twitter.com/Dale_Masch/status/1017693776452546560">stirred up</a> multiple <a href="https://twitter.com/databsurdist/status/1107797978423558149">discussions on twitter</a> about the joys of polar maps.</p>
<p>Behold SOmap.</p>
<pre class="r"><code>SOmap::SOmap()</code></pre>
<pre><code>## Loading required namespace: rgeos</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/SOmap-1.png" width="672" /></p>
</div>
<div id="somap" class="section level2">
<h2>SOmap</h2>
<p>To install the <a href="https://github.com/AustralianAntarcticDivision/SOmap">SOmap</a> package use</p>
<pre class="r"><code>remotes::install_github(&quot;AustralianAntarcticDivision/SOmap&quot;)</code></pre>
<p>and see the <a href="https://australianantarcticdivision.github.io/SOmap/">package readme and documentation</a> for further details.</p>
<p>Creating a polar map is as easy as the following.</p>
<pre class="r"><code>library(SOmap)
pmap &lt;- SOmap()
pmap</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/polar-go-1.png" width="672" /></p>
<p>To add our own data to the map we can use the <code>SOplot()</code> function, by default this function is geared to adding data to our existing map.</p>
<pre class="r"><code>pmap
longitudes &lt;- seq(-180, 175, by = 5)
latitudes &lt;- approx(c(-48, -88, -48), n = length(longitudes))$y
SOplot(longitudes, latitudes, pch = 1:25)</code></pre>
<pre><code>## No projection provided, assuming longlat</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/polar-add-1.png" width="672" /></p>
<p>The great feature here is that we only needed our data, points in longitude and latitude and a single call to <code>SOplot()</code> - the data is automtically added to the plot in the right way and works much like <a href="https://stat.ethz.ch/R-manual/R-devel/library/graphics/html/plot.html">base plot()</a>.</p>
<p>To start afresh from <code>SOmap()</code> above we can <code>print()</code> the object.</p>
<p>We can also add spatial types to the plot.</p>
<pre class="r"><code>print(pmap)
SOplot(SOmap_data$seaice_oct)
SOplot(SOmap_data$seaice_feb, col = &quot;firebrick&quot;, lwd = 2, lty = 2)</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/other-types-1.png" width="672" /></p>
<p>In the previous post we had these desired features.</p>
<ul>
<li>a local, specific, extent (this is surprisingly difficult to get right)</li>
<li>a “graticule”, i.e. lines of constant longitude and latitude</li>
<li>other data on the map, again this can be suprisingly complicated</li>
<li>labels</li>
<li>aesthetics and scales for the data on the map</li>
<li>accoutrements (scale bars and north arrow and the fancy white-black margin real maps use)</li>
</ul>
<p>The extent is controlled by the data we give <code>SOauto_map()</code>, this also adapts the map projection in use to best suit the data given.</p>
<pre class="r"><code>grid &lt;- expand.grid(x= seq(105, 165, by = 5), y = seq(-75, -38, by = 8))
amap &lt;- SOauto_map(grid$x, grid$y)</code></pre>
<p>By default, the input data are plotted as points and as joined lines. The lines don’t make sense here, so turn them off.</p>
<pre class="r"><code>(amap &lt;- SOauto_map(grid$x, grid$y, input_lines = FALSE))</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/no-lines-1.png" width="672" /></p>
<p>As well as our very contrived set of grid points, more realistic data works as well.</p>
<pre class="r"><code>track &lt;- SOmap::SOmap_data$mirounga_leonina
trackmap &lt;-  SOauto_map(track$lon, track$lat, pcol = &quot;yellow&quot;)
trackmap</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/tracks-1.png" width="672" /></p>
<p>While <code>SOplot()</code> provides the arguments for the plot method in use, <code>SOmap()</code> and <code>SOauto_map()</code> provide special argumens that match their base equivalents for points and lines, i.e. <code>pcol</code> and <code>lcol</code> respectively.</p>
<p>We see immediately that the seal heading west raced home somewhat more quickly than its easterly counterpart.</p>
<pre class="r"><code>SOauto_map(track$lon, track$lat, pcol = colourvalues::colour_values(track$date))</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/tracktime-1.png" width="672" /></p>
<pre class="r"><code>library(dplyr)
track %&gt;% group_by(id) %&gt;% 
  summarize(start = min(date), end =max(date), west = min(lon), east = max(lon))</code></pre>
<pre><code>## # A tibble: 2 x 5
##   id         start               end                  west  east
##   &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;
## 1 ct96-05-13 2013-03-15 11:21:41 2013-09-18 16:44:36  69.7 116. 
## 2 ct96-09-13 2013-03-06 23:01:11 2013-08-24 23:37:25  31.3  70.6</code></pre>
</div>
<div id="exploring-projections" class="section level2">
<h2>Exploring projections</h2>
<p>The default projection family is <code>+proj=stere</code>. It is a <em>family</em> because while this is a Polar Stereographic projection the actual details include a central longitude, central latitude, latitude of true-scale, ellipsoid and datum, and many others. If we change any of these parameters from their defaults we have a completely different map projection. There is a literal infinity of possible Polar Stereographic projections, though in practice we tend to use only a handful.</p>
<p>There are other families, Lambert Azimuthal Equal Area <code>+proj=laea</code>, Lambert Conformal Conic <code>+proj=lcc</code>, Gnomonic <code>+proj=gnom</code>, Mercator <code>+proj=merc</code>, Equidistant Cylindrical <code>+proj=eqc</code>, Mollweide <code>+proj=moll</code>, Oblique Mercator <code>+proj=omerc</code>, and <a href="https://proj4.org/operations/projections/index.html">many more</a>. Another good catalogue of projections is the <a href="https://github.com/d3/d3-geo-projection#projections">d3 software readme</a>.</p>
<p>Some of these familes may be specified simply by name, and the map will be automatically configured to centre on the input data.</p>
<pre class="r"><code>SOauto_map(track$lon, track$lat, family = &quot;lcc&quot;)</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/auto-proj-1.png" width="672" /></p>
<pre class="r"><code>#title(main = &quot;Lambert Conformal Conic&quot;)

SOauto_map(track$lon, track$lat, family = &quot;laea&quot;)</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/auto-proj-2.png" width="672" /></p>
<p>We can control the map projection centre if required.</p>
<pre class="r"><code>SOauto_map(track$lon, track$lat, family = &quot;laea&quot;, centre_lon = 120, centre_lat = -80)</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/custom-centre-1.png" width="672" /></p>
<p>Not everything will work, or work well - but this is an easy way to explore what kind of projection is sensible for our data.</p>
<pre class="r"><code>SOauto_map(track$lon, track$lat, family = &quot;moll&quot;)</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<pre class="r"><code>SOauto_map(track$lon, track$lat, family = &quot;gnom&quot;)</code></pre>
<pre><code>## Warning in rgdal::rawTransform(projfrom, projto, nrow(xy), xy[, 1], xy[, :
## 225 projected point(s) not finite</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<pre class="r"><code>SOauto_map(track$lon, track$lat, family = &quot;merc&quot;)</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/unnamed-chunk-2-3.png" width="672" /></p>
<p>Some projections require extra parameters, and those can be controlled precisely by setting <code>family</code> directly as a full projection string. In this case the <code>centre_lon</code> and <code>centre_lat</code> values will be ignored.</p>
<pre class="r"><code>SOauto_map(track$lon, track$lat, family = &quot;+proj=omerc +lon_1=40 +lon_2=120 +lonc=90 +lat_1=-40 +lat_2=-70&quot;)</code></pre>
<p><img src="../../../../post/2019-03-20-get-antequated-with-somap_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>…</p>
</div>

    </div>

    <footer>
        <ul class="stats">
    
        

        
        
    

    
    
</ul>

    </footer>
</article>
<ul class="actions pagination">
    
        <li><a href="../../../../2017/06/14/polar-maps-now/"
                class="button big previous">polar maps now!</a></li>
    

    
</ul>




    </div>
    
<section id="sidebar">

    
        <section id="intro">
            
            
            
            <ul class="icons">
                
                
            </ul>
        </section>

    
        <section id="recent-posts">
            <ul class="posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../2019/03/20/get-antequated-with-somap/">Get antequated with SOmap</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2019-03-20'>
                                    March 20, 2019</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../2017/06/14/polar-maps-now/">polar maps now!</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2017-06-14'>
                                    June 14, 2017</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../2017/06/13/hello-antequated/">hello-antequated</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2017-06-13'>
                                    June 13, 2017</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../2017/03/08/general-southern-ocean-map/">Making a general Southern Ocean map</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2017-03-08'>
                                    March 8, 2017</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="../../../../post/">Posts</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2019-03-20'>
                                    March 20, 2019</time>
                            </header>
                        </article>
                    </li>
                

                
                    <li>
                        <ul class="actions">
                            <li><a href=
                            
                                "/post/"
                            
                            class="button">View more posts</a></li>
                        </ul>
                    </li>
                
            </ul>
        </section>

    
    
    
    
        <section id="categories">
            <ul class="posts">
                <header>
                    <h3><a href="../../../../categories/">Categories</a></h3>
                </header>

                
                    
                

                
            </ul>
        </section>
    

    
        

    
        <section id="footer">
            <ul class="icons">
                
                
            </ul>

            <p class="copyright">&copy; Antequated - maps for the rest of us. Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a>. Ported by <a href="//github.com/jpescador" target="_blank">Julio Pescador</a>. Powered by <a href="//gohugo.io" target="_blank">Hugo</a></p>
        </section>

</section>

            </div>
        <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
        

        
        
            
        

        
        
            <script src="../../../../js/jquery.min.js"></script>
            <script src="../../../../js/skel.min.js"></script>
            <script src="../../../../js/util.js"></script>
            <script src="../../../../js/main.js"></script>
            <script src="../../../../js/backToTop.js"></script>
            <script src="../../../../js/highlight.pack.js"></script>
        

        

            
            <script>hljs.initHighlightingOnLoad();</script>
            
    </body>
</html>

